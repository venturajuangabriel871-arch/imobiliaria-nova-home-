<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Detalle de Propiedad | NOVA-HOUSE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>

<nav class="navbar navbar-dark bg-dark px-4">
    <a class="navbar-brand" href="propiedades.html">â† Volver</a>
    <span class="navbar-text text-white">Detalle de Propiedad</span>
</nav>

<div class="container my-5" id="detailContainer">
    <!-- Contenido dinÃ¡mico -->
</div>

<script>
const property = JSON.parse(localStorage.getItem("selectedProperty"));
const container = document.getElementById("detailContainer");

if (!property) {
    container.innerHTML = `
        <div class="alert alert-warning">
            No se encontrÃ³ la propiedad.
        </div>`;
    throw new Error("No property selected");
}

// Helpers
const yesNo = v => v ? "SÃ­" : "No";

function renderFeatures(p) {
    const type = p.type.toLowerCase();

    // Valores por defecto si no existen
    const f = p.features || {};

    if (type === "casa") {
        return `
        <ul class="list-group">
            <li class="list-group-item">ğŸ› Dormitorios: ${f.dormitorios ?? 3}</li>
            <li class="list-group-item">ğŸš¿ BaÃ±os: ${f.banos ?? 2}</li>
            <li class="list-group-item">ğŸ›‹ Sala: ${yesNo(f.sala ?? true)}</li>
            <li class="list-group-item">ğŸ½ Comedor: ${yesNo(f.comedor ?? true)}</li>
            <li class="list-group-item">ğŸ³ Cocina: ${yesNo(f.cocina ?? true)}</li>
            <li class="list-group-item">ğŸŒ¿ Patio: ${yesNo(f.patio ?? true)}</li>
            <li class="list-group-item">ğŸš— Garaje: ${yesNo(f.garaje ?? true)}</li>
        </ul>`;
    }

    if (type === "departamento") {
        return `
        <ul class="list-group">
            <li class="list-group-item">ğŸ› Dormitorios: ${f.dormitorios ?? 2}</li>
            <li class="list-group-item">ğŸš¿ BaÃ±os: ${f.banos ?? 1}</li>
            <li class="list-group-item">ğŸ›‹ Sala: ${yesNo(f.sala ?? true)}</li>
            <li class="list-group-item">ğŸ³ Cocina: ${yesNo(f.cocina ?? true)}</li>
            <li class="list-group-item">ğŸŒ‡ BalcÃ³n: ${yesNo(f.balcon ?? false)}</li>
            <li class="list-group-item">ğŸ¢ Piso: ${f.piso ?? 1}</li>
            <li class="list-group-item">ğŸ›— Ascensor: ${yesNo(f.ascensor ?? true)}</li>
        </ul>`;
    }

    if (type === "terreno") {
        return `
        <ul class="list-group">
            <li class="list-group-item">ğŸ“ Ãrea: ${f.area ?? 300} mÂ²</li>
            <li class="list-group-item">ğŸš° Servicios: ${f.servicios ?? "Agua y Luz"}</li>
            <li class="list-group-item">ğŸš— Acceso vehicular: ${yesNo(true)}</li>
            <li class="list-group-item">ğŸ“„ DocumentaciÃ³n: ${f.documentacion ?? "Al dÃ­a"}</li>
        </ul>`;
    }

    if (type === "lote") {
        return `
        <ul class="list-group">
            <li class="list-group-item">ğŸ“ Ãrea: ${f.area ?? 250} mÂ²</li>
            <li class="list-group-item">ğŸ— Urbanizado: ${yesNo(f.urbanizado ?? true)}</li>
            <li class="list-group-item">ğŸš° Servicios: ${f.servicios ?? "Agua y Luz"}</li>
            <li class="list-group-item">ğŸ“„ DocumentaciÃ³n: ${f.documentacion ?? "Al dÃ­a"}</li>
        </ul>`;
    }

    return `<p>No hay caracterÃ­sticas disponibles.</p>`;
}

// Render principal
container.innerHTML = `
<div class="row g-5">

    <div class="col-md-6">
        <img src="${property.image || 'https://via.placeholder.com/600x400'}"
             class="img-fluid rounded shadow">
    </div>

    <div class="col-md-6">
        <span class="badge bg-warning text-dark mb-2">${property.type}</span>

        <h2 class="fw-bold">${property.title}</h2>
        <p class="text-muted">${property.location}</p>

        <h3 class="text-success fw-bold">
            $${Number(property.price).toLocaleString()}
        </h3>

        <h5 class="fw-bold mb-3">CaracterÃ­sticas</h5>
        <hr class="my-5">

<div class="map-section">
    <h5 class="fw-bold mb-3">UbicaciÃ³n del inmueble</h5>

    <div class="map-container">
        <iframe
            id="propertyMap"
            src=""
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
        </iframe>
    </div>
</div>
        ${renderFeatures(property)}

        <a href="contacto.html" class="btn btn-dark mt-4">
            Contactar
        </a>
    </div>

</div>
`;
// ===============================
// MAPA SEGÃšN UBICACIÃ“N
// ===============================
const city = property.location || "Bolivia";
const query = encodeURIComponent(city + " Bolivia");

const mapURL = `https://www.google.com/maps?q=${query}&output=embed`;

document.getElementById("propertyMap").src = mapURL;
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</script>


</body>
</html>

